classdef table	properties (Access=public)		Properties = TableProperties()
	end	properties (GetAccess=public)		data	end
			methods (Access=public)		function [this]=table(varargin)			%constructor						function [vars,varCount,varNames]=parseNameValuePairs(varargin)				namedParameterIndex=find((cellfun(@ischar,varargin) & cellfun(@isrow,varargin)),1);				if 	~isempty(namedParameterIndex)					vars=varargin(1:namedParameterIndex-1);					varCount=length(vars);					p=inputParser();					p.FunctionName='table';					p.CaseSensitive=true;					addParameter(p,'VariableNames',{}, validateNames(varCount));					addParameter(p,'RowNames',{}, validateNames(rowCount));					addParameter(p,'DimensionNames',{}, validateNames(2));					p.KeepUnmatched=false;					parse(p,varargin{namedParameterIndex:end});					varNames=p.Results.VariableNames;				else					vars=varargin;					varCount=length(vars);					varNames={};						end										if isempty(varNames)					varNames=arrayfun(@(c)['Var', num2str(c)],1:varCount,'UniformOutput',false);				end			end
						function [v,d]=formatColumn(varName,col)				[n,m]=size(col);				if m==1 || isa(col,'char')					v={varName}; 					d=arrayfun(@(i){col(i,:)},(1:n)');				else					v=cell();					d=cell();					for j=1:m						v(j)=[varName,'(',num2str(j),')'];						d(:,j)=arrayfun(@(i){col(i,j)},(1:n)');					end				end			end			function vf=validateNames(varCount) 				vf=@(vn)(iscell(vn) && size(vn,2)==varCount & all(cellfun(@ischar,vn) & cellfun(@isrow,vn)) );			end			rowCount=size(varargin{1},1);			[vars,varCount,varNames]=parseNameValuePairs(varargin{:});									n=size(vars{1},1);			i=1;			[this.Properties.VariableNames,this.data]=formatColumn(varNames{i}, vars{i});			for i=2:varCount				if size(vars{i},1)~=n					error(['Error at column #', num2str(i),': All table columns must have the same number of rows'])				else					[v,d]=formatColumn(varNames{i}, vars{i});					this.data=[this.data,d];					this.Properties.VariableNames=[this.Properties.VariableNames,v];				end			end 					end 				function strTable=char(this)			[n,m]=size(this.data);			space=repmat(' ',n+2,2);			for i=1:m				var=cell2mat(this.data(:,i));				colWidth=max([length(this.Properties.VariableNames{i}), size(num2str(var),2)]);				dashes=repmat('-',1,colWidth);				if ischar(var)					strCol=[this.Properties.VariableNames{i};dashes;var];				else					strCol=[this.Properties.VariableNames{i};dashes;num2str(var,['%',num2str(colWidth),'d'])];								end				if i==1					strTable=strCol;					else					strTable=[strTable,space,strCol];				end
			end		end				function disp(this)			disp(char(this))		end				function data=table2cell(this)			data=this.data;
		end
	endend		
